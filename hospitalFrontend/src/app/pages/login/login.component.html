<!-- Login form -->
<form (ngSubmit)="login()" #LoginForm="ngForm" method="post" id="Login">
  <!-- Left section of the form -->
  <div class="left">
    <div>
      <p>HealthConnect</p>
      <img src="/img/logo.png" />
    </div>

    <!-- @if - Mostrar intentos de login (ahora fuera del div centrado) -->
    @if (loginAttempts > 0) {
    <div class="attempts-badge">Intentos fallidos: {{ loginAttempts }}</div>
    }
  </div>

  <!-- Right section of the form -->
  <div class="right">
    <div>
      <h1>Login</h1>

      <!-- @switch - Mostrar diferentes estados del login -->
      @switch (loginStatus) { @case ('loading') {
      <div class="status-message loading">
        <span class="spinner">‚è≥</span>
        Verificando credenciales...
      </div>
      } @case ('success') {
      <div class="status-message success">
        {{ errorMessage }}
      </div>
      } @case ('error') {
      <div class="status-message error">
        {{ errorMessage }}
      </div>
      } }

      <!-- Username input field -->
      <input
        type="text"
        name="username"
        placeholder="Username"
        [(ngModel)]="username"
        [disabled]="isLoading"
      />
      <span class="material-symbols-outlined person"></span>

      <!-- Password input field -->
      <input
        type="password"
        name="password"
        placeholder="Password"
        [(ngModel)]="password"
        [disabled]="isLoading"
      />
      <span class="material-symbols-outlined lock"></span>

      <!-- Login button -->
      <button type="submit" [disabled]="isLoading || loginAttempts >= errorMessages.length">
        @if (isLoading) { Verificando... } @else { Login }
      </button>

      <!-- Register button -->
      <button type="button" 
      class="register-btn" 
      (click)="goToRegister()">
       Registrarse </button>
    </div>
  </div>
</form>
